{"title":"Muddy Points","markdown":{"yaml":{"title":"Muddy Points","subtitle":"Lesson","date-modified":"today","format":{"html":{"link-external-newwindow":true}},"editor_options":{"chunk_output_type":"console"}},"headingText":"Muddy Points 2024","containsRefs":false,"markdown":"\n\n\n### 1. What models or values are we comparing in VIF?\n\nMmm good question! VIFs work for continuous and binary variables. So if your model only has continuous or binary covariates, then the VIFs and GVIFs are the same, and you can use either. The GVIFs are needed for multi-level covariates.\n\n### 2. Still a little confused on the context of when we use a centered value vs not in our model.\n\nYou can always center a value! There are two scenarios where centering is really helpful:\n\n1.  When we have an interaction. Centering makes coefficients more interpretable\n\n2.  When we have a transformation of the variable. Centering avoids issues with multicollinearity.\n\n### 3. What is the difference between multicollinearity vs confounding vs effect modification?\n\n[Here's a pretty good video about the differences!](https://www.youtube.com/watch?v=4z39VgDgCVI&ab_channel=MarinStatsLectures-RProgramming%26Statistics) About 8 minutes long, but easily played at 1.25/1.5 speed.\n\n### 4. Why we would have both age and age squared in a model\n\n```{r}\n#| echo: false\n#| warning: false\n#| message: false\n\n\nlibrary(broom)\nlibrary(ggplot2)\nlibrary(gt)\nlibrary(tidyverse)\nage = runif(500, 18, 80)\ny = rnorm(500, -10 + 0.5*age + 0.6*age^2, 100)\n\ndf = data.frame(y=y, age=age, age_sq = age^2, \n                age_c = age - mean(age), \n                age_c_sq = (age - mean(age))^2)\n```\n\nWe would only have age and age-squared if we noticed the relationship between age and our outcome was not linear. For example, our plot could look like this:\n\n```{r}\n#| warning: false\n#| message: false\n#| fig-width: 6\n#| fig-height: 4\n#| fig-align: center\n\nggplot(df, aes(x = age, y = y)) + geom_point() + geom_smooth()\n```\n\nAnd let's say we see the following plot for age-squared:\n\n```{r}\n#| warning: false\n#| message: false\n#| fig-width: 6\n#| fig-height: 4\n#| fig-align: center\nggplot(df, aes(x = age_sq, y = y)) + geom_point() + geom_smooth()\n```\n\nThen we would make the transformation of age for our model. When we include age-squared in the model, we still need to include age. We can run the model with both:\n\n```{r}\nmod = lm(y ~ age + age_sq, data = df)\n```\n\nAnd we can look at the regression table. Notice that the standard error of age and age-squared's coefficients are okay, but the intercept's standard error is really big.\n\n```{r}\ntidy(mod, conf.int = T) %>% gt() %>% fmt_number(decimals = 2)\n```\n\nWe can also look at the VIF:\n\n```{r}\nrms::vif(mod)\ncar::vif(mod) # will only give us GVIF if there is a multi-level covariate in the model\n```\n\nThe VIFs are really big, so centering age will help the multicolinearity of the model.\n\n```{r}\nmod2 = lm(y ~ age_c + age_c_sq, data = df)\n```\n\nWhere `age_c` is age centered at the mean, and `age_c_sq` is the centered age squared.\n\n```{r}\ntidy(mod2, conf.int = T) %>% gt() %>% fmt_number(decimals = 2)\n```\n\n```{r}\ncar::vif(mod2) # will only give us GVIF if there is a multi-level covariate in the model\n```\n\nYay! The VIFs are much better now! And the intercept and age coefficient estimate have better standard error!\n","srcMarkdownNoYaml":"\n\n## Muddy Points 2024\n\n### 1. What models or values are we comparing in VIF?\n\nMmm good question! VIFs work for continuous and binary variables. So if your model only has continuous or binary covariates, then the VIFs and GVIFs are the same, and you can use either. The GVIFs are needed for multi-level covariates.\n\n### 2. Still a little confused on the context of when we use a centered value vs not in our model.\n\nYou can always center a value! There are two scenarios where centering is really helpful:\n\n1.  When we have an interaction. Centering makes coefficients more interpretable\n\n2.  When we have a transformation of the variable. Centering avoids issues with multicollinearity.\n\n### 3. What is the difference between multicollinearity vs confounding vs effect modification?\n\n[Here's a pretty good video about the differences!](https://www.youtube.com/watch?v=4z39VgDgCVI&ab_channel=MarinStatsLectures-RProgramming%26Statistics) About 8 minutes long, but easily played at 1.25/1.5 speed.\n\n### 4. Why we would have both age and age squared in a model\n\n```{r}\n#| echo: false\n#| warning: false\n#| message: false\n\n\nlibrary(broom)\nlibrary(ggplot2)\nlibrary(gt)\nlibrary(tidyverse)\nage = runif(500, 18, 80)\ny = rnorm(500, -10 + 0.5*age + 0.6*age^2, 100)\n\ndf = data.frame(y=y, age=age, age_sq = age^2, \n                age_c = age - mean(age), \n                age_c_sq = (age - mean(age))^2)\n```\n\nWe would only have age and age-squared if we noticed the relationship between age and our outcome was not linear. For example, our plot could look like this:\n\n```{r}\n#| warning: false\n#| message: false\n#| fig-width: 6\n#| fig-height: 4\n#| fig-align: center\n\nggplot(df, aes(x = age, y = y)) + geom_point() + geom_smooth()\n```\n\nAnd let's say we see the following plot for age-squared:\n\n```{r}\n#| warning: false\n#| message: false\n#| fig-width: 6\n#| fig-height: 4\n#| fig-align: center\nggplot(df, aes(x = age_sq, y = y)) + geom_point() + geom_smooth()\n```\n\nThen we would make the transformation of age for our model. When we include age-squared in the model, we still need to include age. We can run the model with both:\n\n```{r}\nmod = lm(y ~ age + age_sq, data = df)\n```\n\nAnd we can look at the regression table. Notice that the standard error of age and age-squared's coefficients are okay, but the intercept's standard error is really big.\n\n```{r}\ntidy(mod, conf.int = T) %>% gt() %>% fmt_number(decimals = 2)\n```\n\nWe can also look at the VIF:\n\n```{r}\nrms::vif(mod)\ncar::vif(mod) # will only give us GVIF if there is a multi-level covariate in the model\n```\n\nThe VIFs are really big, so centering age will help the multicolinearity of the model.\n\n```{r}\nmod2 = lm(y ~ age_c + age_c_sq, data = df)\n```\n\nWhere `age_c` is age centered at the mean, and `age_c_sq` is the centered age squared.\n\n```{r}\ntidy(mod2, conf.int = T) %>% gt() %>% fmt_number(decimals = 2)\n```\n\n```{r}\ncar::vif(mod2) # will only give us GVIF if there is a multi-level covariate in the model\n```\n\nYay! The VIFs are much better now! And the intercept and age coefficient estimate have better standard error!\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","title-prefix":"","toc":true,"output-file":"15_MLR_Diagnostics_muddy_points.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.25","theme":["../../sandstone_NW.scss"],"title":"Muddy Points","subtitle":"Lesson","date-modified":"today","editor_options":{"chunk_output_type":"console"}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}